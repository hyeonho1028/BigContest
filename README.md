# Big Contest

## 2018년 빅콘테스트 - 영화 관객수 예측

### 1 데이터 수집
#### 1. 영화데이터 수집
1. KOFIC에서 영화관객수, 좌석수, 스크린수, 영화개봉일 등의 자료를 다운로드 받음(08년 ~ 18년 자료 사용)
#### 2. 별점 및 감독 크롤링
1. 크롤링을 사용하여 위에서 수집된 영화의 감독, 배우, 네이버평점을 수집하였음(Python을 사용하였음.)
  
### 2 데이터 전처리
#### 1. 결측값, 이상값 처리
1. 성인영화의 경우 이상값으로 생각하여 제거함
2.1 관객 수가 1만명 이하의 영화가 매우 많았는 데, 이는 데이터의 지나친 skewness를 일으킨다고 판단하여 제거하였다.
2.2 두번째 방법으로는 log scale을 취해 관객의 skewness분포를 완화시켜주었다.
3. 배급사나 제작사가 Missing인 경우가 많았는데, 이는 없는 것 자체로도 의미가 있다고 생각하여 제거하지 않고 없다는 의미인 Not Value라는 값을 할당하였다.

#### 2. 범주화 및 스코어링
1. 별점 데이터의 경우, 데이터의 분포가 쌍봉이 많았기 때문에 6점이하, 6점 ~ 8점, 8점 ~ 10점으로 범주화한 파생컬럼을 만들었다.
2. 장르의 경우 범주 데이터로 존재하나 너무 다양한 장르가 존재하므로 분포가 비슷한 범주들끼리 합쳐 4개의 레벨을 갖는 파생컬럼을 만들었다.
3. 돌일한 제작사를 갖는 관객수의 평균으로 제작사에 대한 스코어링을 하였고, 감독과 배우, 배급사도 마찬가지로 동일적용 해 주었다. 또한 점수를 범주화하여 10개 레벨을 갖는 파생컬럼을 만들었다.
4. 또한 처음 영화를 제작하는 감독에 대해 패널티를 부과하여 낮은 관객수를 달성하도록 하였다.
5. 시계열 데이터들도 있기 때문에, 각각의 연도, 분기, 월, 휴일이 많은 날에 대한 파생컬럼을 모두 만들었다.

### 3 데이터 이해
#### 1. 시각화를 통한 이해
1. ggplot2 패키지를 이용하였고, 주로 관객수에 대한 scaling 또는 장르를 낮은 레벨로 축소할 때 분포를 보고 판단하였다.
2. 처음 영화를 제작하는 감독의 경우, 낮은 관객수를 달성할 확률이 높은 지 파악하기 위해 시각화하였다.

### 4 데이터 모델링
R을 이용한 모델링을 하였다.
#### 1. regression
1. AIC 기준 단계별 방법(변수선택법)으로 regression을 하였다.
2. nonlinear regerssion(spline을 사용하였다.)

#### 2. random forest
1. random forest

#### 3. svm
1. kernel을 linear로 설정한 svm을 사용했다.

#### 4. boosting
1. regression을 boosting하여 예측력을 증가시켰다.
2. xgboost

#### 2. ensembles
1. 예측값을 단순히 average을 취한 방법
2. stacking(blending)을 사용하여 예측값으로 다시 예측하는 기법을 사용하였다.

### 5 예측 및 평가
1. train data는 90%, validation data는 10%로 설정하여 검정하였다.
2. CV의 RMSE를 통한 평가 : 그리드 서치나, 더 좋은 모수를 추정하기에는 시간이 부족하였으므로 현재까지 가장 낮은 RMSE를 내는 모델을 만들었고, 약 3만명의 RMSE가 있었다.
3. 실제 예측치 : 너의결혼식(290만 3882명), 나를 차버린 스파이(27만 2264명), 물괴(255만 6970명)

### 6 성공? 실패?
결론적으로 너의 결혼식과 나를 차버린 스파이는 굉장히 정확하게 나왔다. 그러나 신임 감독이 촬영한 물괴의 경우 높은 차이가 났다. 이러한 부족한 결과가 나온 이유는 같이 나오는 영화에 대한 정보를 넣어줬다면, 좀 더 정확한 결과가 나오지 않았을까라는 생각을 해보았다. 물괴의 흥행실패 이유는 재미없는 스토리도 있지만, 같이 나오는 영화들이 워낙 쟁쟁했기 때문이다. 좀 더 시간이 있었다면 상호작용항(시너지)이나, 시계열에 대한 부분도 신경쓸 수 있지 않았을까 고민을 해보며, 내년을 기약해 본다.
